[gd_scene load_steps=42 format=3 uid="uid://dd6eibaeqjan1"]

[ext_resource type="Texture2D" uid="uid://cc36u4526veca" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134057.png" id="1_k6ggn"]
[ext_resource type="Script" path="res://Scripts/moulin.gd" id="1_lnxlr"]
[ext_resource type="Texture2D" uid="uid://cadpuixxxuoui" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140617.png" id="1_vhkol"]
[ext_resource type="Texture2D" uid="uid://lhse2jov1pfr" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134105.png" id="2_047uj"]
[ext_resource type="Texture2D" uid="uid://bbuw7hnx8crwm" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140623.png" id="2_i2gye"]
[ext_resource type="Texture2D" uid="uid://d4auafjv7mjqk" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134113.png" id="3_h3jcg"]
[ext_resource type="Texture2D" uid="uid://cqs5s2coliu05" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140627.png" id="3_pq2e1"]
[ext_resource type="Texture2D" uid="uid://cqh6mfnex8ycw" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134226.png" id="4_f1aom"]
[ext_resource type="Texture2D" uid="uid://bhlkcrn12olmx" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140634.png" id="4_sbcxy"]
[ext_resource type="Texture2D" uid="uid://bgln1uohp3exk" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134233.png" id="5_7tifh"]
[ext_resource type="Texture2D" uid="uid://c8ow7r7tuq7w3" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140651.png" id="5_j8li2"]
[ext_resource type="Texture2D" uid="uid://vgupq5v5083b" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140657.png" id="6_6ik3b"]
[ext_resource type="Texture2D" uid="uid://sx66q6dkekml" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134243.png" id="6_128vr"]
[ext_resource type="Texture2D" uid="uid://hmxxu6p3w4ul" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140702.png" id="7_6dlmv"]
[ext_resource type="Texture2D" uid="uid://cljdnm0db1a8l" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134250.png" id="7_xhowg"]
[ext_resource type="Texture2D" uid="uid://0o3envwhdt1k" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134302.png" id="8_efun1"]
[ext_resource type="Texture2D" uid="uid://cm1li6ewvup7s" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140708.png" id="8_kf28p"]
[ext_resource type="Texture2D" uid="uid://wxjy8vo8d3pn" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134314.png" id="9_4tc11"]
[ext_resource type="Texture2D" uid="uid://b0rr6b7rkbp74" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140715.png" id="9_c5e65"]
[ext_resource type="Texture2D" uid="uid://bc5ga2yrml3o2" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140723.png" id="10_7kuxe"]
[ext_resource type="Texture2D" uid="uid://b0w43oi5hai4x" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134320.png" id="10_mjyuf"]
[ext_resource type="Texture2D" uid="uid://dipn72feuang3" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134328.png" id="11_jjgd4"]
[ext_resource type="Texture2D" uid="uid://c2rytabr56ojc" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140730.png" id="11_t3bg6"]
[ext_resource type="Texture2D" uid="uid://dh6bdjy68ukyf" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134347.png" id="12_5hucx"]
[ext_resource type="Texture2D" uid="uid://cfl62ul00f65l" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140737.png" id="12_du7ps"]
[ext_resource type="Texture2D" uid="uid://b8ggrv6xmxog1" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017134353.png" id="13_dqpme"]
[ext_resource type="Texture2D" uid="uid://doylf5ryjnhx1" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017140741.png" id="13_ne2sc"]
[ext_resource type="Texture2D" uid="uid://bn6ri5o4lj4b" path="res://Assets/Bâtiments/moulin/Sans titre 45_20241017141356.png" id="27_gayjo"]
[ext_resource type="PackedScene" uid="uid://ljyyhfin2fwg" path="res://Scenes/interract_label.tscn" id="29_0cem7"]
[ext_resource type="FontFile" uid="uid://ccu6jholutsm4" path="res://Assets/Fonts/Chewy-Regular.ttf" id="29_3n3i5"]
[ext_resource type="PackedScene" uid="uid://duq7v03be7qs2" path="res://Scenes/repair_label.tscn" id="31_iky3b"]
[ext_resource type="Script" path="res://Scenes/interact_menu_moulin.gd" id="32_yqon2"]
[ext_resource type="Texture2D" uid="uid://c13aycu3v6uv5" path="res://Assets/Items/flour.png" id="33_gunke"]
[ext_resource type="Script" path="res://Scenes/repair_menu_moulin.gd" id="34_6ntf5"]
[ext_resource type="Texture2D" uid="uid://coxopis6iuqbk" path="res://Assets/Items/carrot.png" id="35_e6xyr"]

[sub_resource type="SpriteFrames" id="SpriteFrames_5ifjn"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_vhkol")
}, {
"duration": 1.0,
"texture": ExtResource("2_i2gye")
}, {
"duration": 1.0,
"texture": ExtResource("3_pq2e1")
}, {
"duration": 1.0,
"texture": ExtResource("4_sbcxy")
}, {
"duration": 1.0,
"texture": ExtResource("5_j8li2")
}, {
"duration": 1.0,
"texture": ExtResource("6_6ik3b")
}, {
"duration": 1.0,
"texture": ExtResource("7_6dlmv")
}, {
"duration": 1.0,
"texture": ExtResource("8_kf28p")
}, {
"duration": 1.0,
"texture": ExtResource("9_c5e65")
}, {
"duration": 1.0,
"texture": ExtResource("10_7kuxe")
}, {
"duration": 1.0,
"texture": ExtResource("11_t3bg6")
}, {
"duration": 1.0,
"texture": ExtResource("12_du7ps")
}, {
"duration": 1.0,
"texture": ExtResource("13_ne2sc")
}],
"loop": true,
"name": &"moulin_abimé",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_k6ggn")
}, {
"duration": 1.0,
"texture": ExtResource("2_047uj")
}, {
"duration": 1.0,
"texture": ExtResource("3_h3jcg")
}, {
"duration": 1.0,
"texture": ExtResource("4_f1aom")
}, {
"duration": 1.0,
"texture": ExtResource("5_7tifh")
}, {
"duration": 1.0,
"texture": ExtResource("6_128vr")
}, {
"duration": 1.0,
"texture": ExtResource("7_xhowg")
}, {
"duration": 1.0,
"texture": ExtResource("8_efun1")
}, {
"duration": 1.0,
"texture": ExtResource("9_4tc11")
}, {
"duration": 1.0,
"texture": ExtResource("10_mjyuf")
}, {
"duration": 1.0,
"texture": ExtResource("11_jjgd4")
}, {
"duration": 1.0,
"texture": ExtResource("12_5hucx")
}, {
"duration": 1.0,
"texture": ExtResource("13_dqpme")
}],
"loop": true,
"name": &"moulin_bon",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("27_gayjo")
}],
"loop": true,
"name": &"moulin_cassé",
"speed": 5.0
}]

[sub_resource type="Animation" id="Animation_xshtp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -600)]
}

[sub_resource type="Animation" id="Animation_c6bgu"]
resource_name = "TransIN"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-0.0333333, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, -600), Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_utt4i"]
resource_name = "TransOUT"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -600)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ril8e"]
_data = {
"RESET": SubResource("Animation_xshtp"),
"TransIN": SubResource("Animation_c6bgu"),
"TransOUT": SubResource("Animation_utt4i")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_rj2np"]
radius = 376.563

[node name="Moulin" type="StaticBody2D"]
y_sort_enabled = true
scale = Vector2(0.1, 0.1)
script = ExtResource("1_lnxlr")
max_durability = 50
loss_dura_by_tic = 500

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
y_sort_enabled = true
position = Vector2(0, 550)
sprite_frames = SubResource("SpriteFrames_5ifjn")
animation = &"moulin_cassé"
autoplay = "moulin_bon"
offset = Vector2(0, -550)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="."]
position = Vector2(31, 176.5)
polygon = PackedVector2Array(-12, 390.5, -173, 364.5, -271, 324, -296.5, 162.5, -292, -5.5, 251.5, -5.5, 245, 191, 225.5, 321, 122.5, 363)

[node name="Interract Label" parent="." instance=ExtResource("29_0cem7")]
offset_left = -250.0
offset_top = -570.0
offset_right = 242.0
offset_bottom = -490.0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 50
text = "Press \"space\" to sell items"
horizontal_alignment = 1
vertical_alignment = 1
structured_text_bidi_override_options = [null]

[node name="Repair label" parent="." instance=ExtResource("31_iky3b")]
offset_left = -240.0
offset_top = -640.0
offset_right = 247.0
offset_bottom = -575.0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 50
horizontal_alignment = 1
vertical_alignment = 1

[node name="Interact Menu Moulin" type="CanvasLayer" parent="."]
process_mode = 3
offset = Vector2(0, -600)
transform = Transform2D(1, 0, 0, 1, 0, -600)
script = ExtResource("32_yqon2")

[node name="Panel" type="Panel" parent="Interact Menu Moulin"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.498
anchor_right = 0.5
anchor_bottom = 0.498
offset_left = -234.0
offset_top = -245.704
offset_right = 243.0
offset_bottom = 245.296
grow_horizontal = 2
grow_vertical = 2

[node name="Anim" type="AnimationPlayer" parent="Interact Menu Moulin"]
libraries = {
"": SubResource("AnimationLibrary_ril8e")
}
autoplay = "RESET"

[node name="Control" type="Control" parent="Interact Menu Moulin"]
layout_mode = 3
anchors_preset = 0
offset_left = 129.0
offset_top = 78.0
offset_right = 1014.0
offset_bottom = 567.0

[node name="close" type="Button" parent="Interact Menu Moulin/Control"]
self_modulate = Color(1, 0, 0, 1)
layout_mode = 0
offset_left = 644.0
offset_top = 5.0
offset_right = 682.0
offset_bottom = 43.0
theme_override_font_sizes/font_size = 21
text = "X"

[node name="Sell" type="Label" parent="Interact Menu Moulin/Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -227.5
offset_top = 16.0
offset_right = 248.5
offset_bottom = 127.0
grow_horizontal = 2
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 50
text = "Transforme ton blé"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="price" type="Label" parent="Interact Menu Moulin/Control"]
layout_mode = 0
offset_left = 223.0
offset_top = 245.5
offset_right = 673.0
offset_bottom = 300.5
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 45
text = "Prix unitaire: x$"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="transformation1" type="Sprite2D" parent="Interact Menu Moulin/Control"]
position = Vector2(441, 145)
scale = Vector2(2.055, 2.055)
texture = ExtResource("33_gunke")

[node name="plus" type="Button" parent="Interact Menu Moulin/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 4.941
anchor_top = -0.056
anchor_right = 4.941
anchor_bottom = -0.056
offset_left = -3883.79
offset_top = 355.384
offset_right = -3812.41
offset_bottom = 427.384
theme_override_font_sizes/font_size = 45
text = "+"
autowrap_mode = 3

[node name="moins" type="Button" parent="Interact Menu Moulin/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.42
anchor_top = 0.667
anchor_right = 0.42
anchor_bottom = 0.667
offset_left = -36.7
offset_top = -0.163025
offset_right = 36.3
offset_bottom = 71.837
theme_override_font_sizes/font_size = 45
text = "-"
autowrap_mode = 3

[node name="sell one1" type="Button" parent="Interact Menu Moulin/Control"]
self_modulate = Color(1, 0.635294, 0, 1)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -107.5
offset_top = -78.0
offset_right = 119.5
offset_bottom = -14.0
grow_horizontal = 2
grow_vertical = 0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 40
text = "Vendre"

[node name="numbre" type="Label" parent="Interact Menu Moulin/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.507
anchor_top = 0.673
anchor_right = 0.507
anchor_bottom = 0.673
offset_left = -110.695
offset_top = -4.09702
offset_right = 110.305
offset_bottom = 71.903
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 50
text = "X"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="RepairMenuMoulin" type="CanvasLayer" parent="."]
process_mode = 3
offset = Vector2(0, -600)
transform = Transform2D(1, 0, 0, 1, 0, -600)
script = ExtResource("34_6ntf5")

[node name="Panel" type="Panel" parent="RepairMenuMoulin"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.498
anchor_right = 0.5
anchor_bottom = 0.498
offset_left = -448.0
offset_top = -245.704
offset_right = 445.0
offset_bottom = 245.296
grow_horizontal = 2
grow_vertical = 2

[node name="Anim" type="AnimationPlayer" parent="RepairMenuMoulin"]
libraries = {
"": SubResource("AnimationLibrary_ril8e")
}
autoplay = "RESET"

[node name="Control" type="Control" parent="RepairMenuMoulin"]
layout_mode = 3
anchors_preset = 0
offset_left = 129.0
offset_top = 78.0
offset_right = 1014.0
offset_bottom = 567.0

[node name="close" type="Button" parent="RepairMenuMoulin/Control"]
self_modulate = Color(1, 0, 0, 1)
layout_mode = 0
offset_left = 836.0
offset_top = 18.0
offset_right = 874.0
offset_bottom = 56.0
theme_override_font_sizes/font_size = 21
text = "X"

[node name="Repair" type="Label" parent="RepairMenuMoulin/Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -445.5
offset_right = 446.5
offset_bottom = 111.0
grow_horizontal = 2
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 50
text = "Répare ton moulin"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="cost" type="Label" parent="RepairMenuMoulin/Control"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 28.0
offset_top = -24.5
offset_right = 139.0
offset_bottom = 30.5
grow_vertical = 2
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 45
text = "coût : "
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="stone" type="Label" parent="RepairMenuMoulin/Control"]
layout_mode = 0
offset_left = 623.0
offset_top = 224.0
offset_right = 842.0
offset_bottom = 279.0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 45
text = "x Z stone(s)"

[node name="wood" type="Label" parent="RepairMenuMoulin/Control"]
layout_mode = 0
offset_left = 251.0
offset_top = 221.0
offset_right = 468.0
offset_bottom = 276.0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 45
text = "x Z wood(s)"
vertical_alignment = 1

[node name="wood_sprit" type="Sprite2D" parent="RepairMenuMoulin/Control"]
position = Vector2(208, 245)
scale = Vector2(5.875, 5.875)
texture = ExtResource("35_e6xyr")

[node name="stones" type="Sprite2D" parent="RepairMenuMoulin/Control"]
position = Vector2(567, 249)
scale = Vector2(5.875, 5.875)
texture = ExtResource("35_e6xyr")

[node name="repair" type="Button" parent="RepairMenuMoulin/Control"]
self_modulate = Color(0, 1, 0, 1)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -112.5
offset_top = -117.0
offset_right = 114.5
offset_bottom = -53.0
grow_horizontal = 2
grow_vertical = 0
theme_override_fonts/font = ExtResource("29_3n3i5")
theme_override_font_sizes/font_size = 40
text = "Repair"

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(-10, 410)
shape = SubResource("CircleShape2D_rj2np")

[connection signal="actual_exchange" from="." to="Interact Menu Moulin" method="_on_moulin_actual_exchange"]
[connection signal="s_durability" from="." to="Interact Menu Moulin" method="_on_moulin_s_durability"]
[connection signal="s_durability" from="." to="RepairMenuMoulin" method="_on_moulin_s_durability"]
[connection signal="s_max_durability" from="." to="Interact Menu Moulin" method="_on_moulin_s_max_durability"]
[connection signal="s_max_durability" from="." to="RepairMenuMoulin" method="_on_moulin_s_max_durability"]
[connection signal="pressed" from="Interact Menu Moulin/Control/close" to="Interact Menu Moulin" method="_on_close_pressed"]
[connection signal="pressed" from="Interact Menu Moulin/Control/plus" to="Interact Menu Moulin" method="_on_plus_pressed"]
[connection signal="pressed" from="Interact Menu Moulin/Control/moins" to="Interact Menu Moulin" method="_on_moins_pressed"]
[connection signal="pressed" from="Interact Menu Moulin/Control/sell one1" to="Interact Menu Moulin" method="_on_sell_one_1_pressed"]
[connection signal="pressed" from="RepairMenuMoulin/Control/close" to="RepairMenuMoulin" method="_on_close_pressed"]
[connection signal="pressed" from="RepairMenuMoulin/Control/repair" to="RepairMenuMoulin" method="_on_repair_pressed"]
[connection signal="body_entered" from="Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="Area2D" to="." method="_on_area_2d_body_exited"]
